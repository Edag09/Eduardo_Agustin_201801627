!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@materia-ui/ngx-monaco-editor",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms"],e):e(((t=t||self)["materia-ui"]=t["materia-ui"]||{},t["materia-ui"]["ngx-monaco-editor"]={}),t.ng.core,t.rxjs,t.rxjs.operators,t.ng.forms)}(this,(function(t,e,o,i,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var r=function(){return(r=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function a(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a}function d(t,e){return function(o,i){e(o,i,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var c=function(){function t(t,e){var i=this;this.ngZone=t,this.monacoPathConfig=e,this.isMonacoLoaded$=new o.BehaviorSubject(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run((function(){return i.isMonacoLoaded$.next(!0)})):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}return Object.defineProperty(t.prototype,"monacoPath",{set:function(t){t&&(this._monacoPath=t)},enumerable:!0,configurable:!0}),t.prototype.loadMonaco=function(){var t=this,e=function(){var e=t._monacoPath;(window.amdRequire=window.require,!t.nodeRequire)||(window.require=t.nodeRequire,e=window.require("path").resolve(window.__dirname,t._monacoPath));window.amdRequire.config({paths:{vs:e}}),window.amdRequire(["vs/editor/editor.main"],(function(){t.ngZone.run((function(){return t.isMonacoLoaded$.next(!0)}))}))};if(!!window.amdRequire)return e();!!window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);var o=document.createElement("script");o.type="text/javascript",o.src=this._monacoPath+"/loader.js",o.addEventListener("load",e),document.body.appendChild(o)},t.prototype.addElectronFixScripts=function(){var t=document.createElement("script"),e=document.createTextNode("self.module = undefined;"),o=document.createTextNode("self.process.browser = true;");t.appendChild(e),t.appendChild(o),document.body.appendChild(t)},t.ctorParameters=function(){return[{type:e.NgZone},{type:String,decorators:[{type:e.Optional},{type:e.Inject,args:["MONACO_PATH"]}]}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(e.NgZone),e.ɵɵinject("MONACO_PATH",8))},token:t,providedIn:"root"}),t=a([e.Injectable({providedIn:"root"}),d(1,e.Optional()),d(1,e.Inject("MONACO_PATH")),s("design:paramtypes",[e.NgZone,String])],t)}(),p=function(){function t(t,e,i){this.templateRef=t,this.viewContainer=e,this.monacoEditorLoaderService=i,this.isMonacoLoaded$=this.monacoEditorLoaderService.isMonacoLoaded$.asObservable(),this.destroyed$=new o.Subject}return t.prototype.ngOnInit=function(){var t=this;this.isMonacoLoaded$.pipe(i.takeUntil(this.destroyed$)).subscribe((function(e){if(!e)return t.viewContainer.clear();t.viewContainer.createEmbeddedView(t.templateRef)}))},t.prototype.ngOnDestroy=function(){this.destroyed$.next(),this.destroyed$.complete()},t.ctorParameters=function(){return[{type:e.TemplateRef},{type:e.ViewContainerRef},{type:c}]},t=a([e.Directive({selector:"[ngxLoadMonacoEditor]"}),s("design:paramtypes",[e.TemplateRef,e.ViewContainerRef,c])],t)}(),u=function(){function t(t){this.monacoLoader=t,this.init=new e.EventEmitter,this.propagateChange=function(t){}}var o;return o=t,Object.defineProperty(t.prototype,"model",{get:function(){return this.editor&&this.editor.getModel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelMarkers",{get:function(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.monacoLoader.isMonacoLoaded$.pipe(i.filter((function(t){return t})),i.take(1)).subscribe((function(){t.initEditor()}))},t.prototype.ngOnChanges=function(t){if(this.editor&&t.options&&!t.options.firstChange){var e=t.options.currentValue,o=e.language,i=e.theme,n=function(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(o[i[n]]=t[i[n]])}return o}(e,["language","theme"]),r=t.options.previousValue,a=r.language,d=r.theme;a!==o&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),d!==i&&monaco.editor.setTheme(i),this.editor.updateOptions(n)}if(this.editor&&t.uri){var s=t.uri.currentValue,c=t.uri.previousValue;if(c&&!s||!c&&s||s&&c&&s.path!==c.path){var p=this.editor.getValue();this.modelUriInstance&&this.modelUriInstance.dispose();var u=void 0;s&&(u=monaco.editor.getModels().find((function(t){return t.uri.path===s.path}))),this.modelUriInstance=u||monaco.editor.createModel(p,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}},t.prototype.writeValue=function(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.validate=function(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null},t.prototype.registerOnValidatorChange=function(t){this.onErrorStatusChange=t},t.prototype.initEditor=function(){var t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?r(r({},t),this.options):t),this.registerEditorListeners(),this.init.emit(this.editor)},t.prototype.registerEditorListeners=function(){var t=this;this.editor.onDidChangeModelContent((function(){t.propagateChange(t.editor.getValue())})),this.editor.onDidChangeModelDecorations((function(){var e=t.modelMarkers.map((function(t){return t.message})).join("|");t.parsedError!==e&&(t.parsedError=e,t.onErrorStatusChange())})),this.editor.onDidBlurEditorText((function(){t.onTouched()}))},t.prototype.ngOnDestroy=function(){this.editor&&this.editor.dispose()},t.ctorParameters=function(){return[{type:c}]},a([e.Input(),s("design:type",Object)],t.prototype,"options",void 0),a([e.Input(),s("design:type",Object)],t.prototype,"uri",void 0),a([e.Output(),s("design:type",e.EventEmitter)],t.prototype,"init",void 0),a([e.ViewChild("editor",{static:!0}),s("design:type",e.ElementRef)],t.prototype,"editorContent",void 0),t=o=a([e.Component({selector:"ngx-monaco-editor",template:'<div #container class="editor-container" fxFlex>\n\t\t<div\n\t\t\t#editor\n\t\t\tclass="monaco-editor"\n\t\t></div>\n</div>',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return o})),multi:!0},{provide:n.NG_VALIDATORS,useExisting:e.forwardRef((function(){return o})),multi:!0}],styles:["\n.monaco-editor {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n}\n.editor-container {\n\toverflow: hidden;\n\tposition: relative;\n\tdisplay: table;\n\twidth: 100%;\n  height: 100%;\n  min-width: 0;\n}"]}),s("design:paramtypes",[c])],t)}(),h=function(){function t(t){this.monacoLoader=t,this.init=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.container=this.editorContent.nativeElement,this.monacoLoader.isMonacoLoaded$.pipe(i.filter((function(t){return t})),i.take(1)).subscribe((function(){t.initMonaco()}))},t.prototype.ngOnChanges=function(t){if(this.editor&&(t.code&&!t.code.firstChange||t.modified&&!t.modified.firstChange)){var e=monaco.editor.createModel(this.modified),o=monaco.editor.createModel(this.original);this.editor.setModel({original:o,modified:e})}this.editor&&t.options&&!t.options.firstChange&&(t.options.previousValue.theme!==t.options.currentValue.theme&&monaco.editor.setTheme(t.options.currentValue.theme),this.editor.updateOptions(t.options.currentValue))},t.prototype.initMonaco=function(){var t={readOnly:!0,automaticLayout:!0,theme:"vc"};this.options&&(t=Object.assign({},t,this.options)),this.editor=monaco.editor.createDiffEditor(this.container,t);var e=monaco.editor.createModel(this.original),o=monaco.editor.createModel(this.modified);this.editor.setModel({original:e,modified:o}),this.editor.layout(),this.init.emit(this.editor)},t.prototype.ngOnDestroy=function(){this.editor&&this.editor.dispose()},t.ctorParameters=function(){return[{type:c}]},a([e.Input(),s("design:type",String)],t.prototype,"original",void 0),a([e.Input(),s("design:type",String)],t.prototype,"modified",void 0),a([e.Input(),s("design:type",Object)],t.prototype,"options",void 0),a([e.Output(),s("design:type",e.EventEmitter)],t.prototype,"init",void 0),a([e.ViewChild("diffEditor",{static:!0}),s("design:type",e.ElementRef)],t.prototype,"editorContent",void 0),t=a([e.Component({selector:"ngx-monaco-diff-editor",template:'<div #container class="editor-container" fxFlex>\n\t\t<div\n\t\t\t#diffEditor\n\t\t\tclass="monaco-editor"\n\t\t></div>\n</div>',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:["\n.monaco-editor {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n}\n.editor-container {\n\toverflow: hidden;\n\tposition: relative;\n\tdisplay: table;\n\twidth: 100%;\n  height: 100%;\n  min-width: 0;\n}"]}),s("design:paramtypes",[c])],t)}(),l=function(){function t(){}return t=a([e.NgModule({imports:[],declarations:[p,u,h],exports:[p,u,h],entryComponents:[u,h]})],t)}();t.MONACO_PATH="MONACO_PATH",t.MonacoDiffEditorComponent=h,t.MonacoEditorComponent=u,t.MonacoEditorLoaderDirective=p,t.MonacoEditorLoaderService=c,t.MonacoEditorModule=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=materia-ui-ngx-monaco-editor.umd.min.js.map