<style>
  @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');
</style>

<div class="container-fluid title pt-2 pb-1">
  <h1>SYSCOMPILER</h1>
</div>
<br>
<div class="padre">
  <button type="button" class="btn" (click)="openDialog()"> <i class="bi bi-folder2-open"></i> 
    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-folder2-open" viewBox="0 0 16 16">
      <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/>
    </svg> Abrir Archivo 
    <input id="fileInput" type="file" style="display:none" accept=".sc" (change)="readFile($event)" [(ngModel)]="fname">
  </button>
  <br>
  <div class="saveFile">
    <button (click)="GuardarArchivo()" type="button" class="btn"><i class="bi bi-box-arrow-down"></i>
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-box-arrow-down" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"/>
        <path fill-rule="evenodd" d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>
      </svg> Guardar Archivo</button>
  </div>
  <div class="newWindow">
    <button (click)="newWindow()" type="button" class="btn"><i class="bi bi-box-arrow-up-right"></i>
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
        <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"/>
      </svg> Nueva pestaña</button>
  </div>
  <div class="closeWindow">
    <button (click)="closeWindow()" type="button" class="btn"><i class="bi bi-box-arrow-in-down-left"></i>
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-box-arrow-in-down-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M9.636 2.5a.5.5 0 0 0-.5-.5H2.5A1.5 1.5 0 0 0 1 3.5v10A1.5 1.5 0 0 0 2.5 15h10a1.5 1.5 0 0 0 1.5-1.5V6.864a.5.5 0 0 0-1 0V13.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
        <path fill-rule="evenodd" d="M5 10.5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1H6.707l8.147-8.146a.5.5 0 0 0-.708-.708L6 9.293V5.5a.5.5 0 0 0-1 0v5z"/>
      </svg> Cerrar pestaña</button>
  </div>
  <div class="DrawAST">
    <button (click)="DrawAST()" type="button" class="btn"><i class="bi bi-download"></i>
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
      </svg> Descargar AST</button>
  </div>
  <div class="limpiar">
    <button (click)="limpiar()" type="button" class="btn"><i class="bi bi-x"></i>
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
      </svg>Limpiar Editores</button>
  </div>
</div>

<div class="container pt-2">

  <form #iForm="ngForm" class="mb-4" (ngSubmit)="Compilar()" novalidate>
    <div class="row mb-5 fila">
      <div class="col-lg-6 col-sm-12">
        <p class="my-0 text-white subtitulo" style="font-size: 175%;">Editor</p>
        <ngx-monaco-editor id="entrada" name="entrada" class="codebox" [options]="EditorOptions" [(ngModel)]="entrada"></ngx-monaco-editor>
      </div>
      <div class="col-lg-6 col-sm-12">
        <p class="my-0 text-white subtitulo" style="font-size: 175%;">Consola</p>
        <ngx-monaco-editor id="salida" name="salida" class="codebox" [options]="ConsoleOptions" [(ngModel)]="salida"></ngx-monaco-editor>
      </div>
    </div>
    <br>
    <div class="row text-center">
      <div class="col-12">
        <button type="submit" style="background-color: #7FC8A9;" class="btn btn-outline-light btn-lg"> <i class="bi bi-play-circle"></i>
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-play-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/>
          </svg> EJECUTAR</button>
      </div>
    </div>
  </form>

  <hr>

  <div class="row my-5">
    <div class="col-12">
      <p class="mt-2 mb-1 text-white subtitulo" style="text-align: center; font-size: 36px;">Tabla de símbolos</p>
      <table class="table table-striped table-dark text-center">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nombre</th>
            <th scope="col">Tipo símbolo</th>
            <th scope="col">Tipo dato</th>
            <th scope="col">Ámbito</th>
            <th scope="col">Fila</th>
            <th scope="col">Columna</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of simbolos; let i = index">
            <th scope="row">{{i+1}}</th>
            <td>{{item.id}}</td>
            <td>{{item.objeto}}</td>
            <td>{{item.tipo}}</td>
            <td>{{item.entorno}}</td>
            <td>{{item.linea}}</td>
            <td>{{item.columna}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <div class="row my-5">
    <div class="col-12">
      <p class="mt-2 mb-1 text-white subtitulo" style="text-align: center; font-size: 36px;">Tabla de errores</p>
      <table class="table table-striped table-dark">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Tipo</th>
            <th scope="col">Error</th>
            <th class="text-center" scope="col">Fila</th>
            <th class="text-center" scope="col">Columna</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of errores; let i = index">
            <th scope="row">{{i+1}}</th>
            <td>{{item.tipo}}</td>
            <td class="fc">{{item.error}}</td>
            <td class="text-center">{{item.linea}}</td>
            <td class="text-center">{{item.columna}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>